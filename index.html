<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Quiz Ball - Interactive Quiz Game</title>
    <!-- Include Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        

        
        /* Background Music Control */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 24px;
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .music-control.playing {
            background: linear-gradient(145deg, #e91e63, #c2185b);
            animation: musicPulse 2s ease-in-out infinite;
        }
        
        .music-control.paused {
            background: linear-gradient(145deg, #ff9800, #f57c00);
        }
        
        .music-control.stopped {
            background: linear-gradient(145deg, #6c757d, #5a6268);
        }
        
        .music-control:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4), 0 4px 15px rgba(233, 30, 99, 0.3);
        }
        
        @keyframes musicPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
        }

        /* Container */
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        /* Header Section - Game Info */
        .header {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px 15px 30px 15px;
            margin-bottom: 20px;
            position: relative;
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.95), rgba(44, 79, 122, 0.9));
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .game-info {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            gap: 30px;
        }
        
        .logo-center {
            width: 100px;
            height: 100px;
        }
        
        .logo-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .progress-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .question-counter {
            background: linear-gradient(145deg, #e91e63, #c2185b);
            color: white;
            font-weight: 700;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 18px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }
        
        .stage-indicator {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(248, 249, 250, 0.8));
            color: #1e3a5f;
            font-weight: 600;
            padding: 6px 16px;
            border-radius: 15px;
            font-size: 14px;
            border: 1px solid rgba(30, 58, 95, 0.2);
        }

        /* Navigation Controls */
        .navigation-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .nav-button {
            background: linear-gradient(145deg, #e91e63, #c2185b);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-button:hover:not(:disabled) {
            background: linear-gradient(145deg, #c2185b, #ad1457);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(233, 30, 99, 0.4);
        }
        
        .nav-button:disabled {
            background: linear-gradient(145deg, #6c757d, #5a6268);
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .reveal-button {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
            padding: 14px 28px;
            font-size: 18px;
        }
        
        .reveal-button:hover:not(:disabled) {
            background: linear-gradient(145deg, #2c4f7a, #3a5f8a);
        }

        /* Back Button */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 2px solid rgba(30, 58, 95, 0.2);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2), 0 2px 8px rgba(233, 30, 99, 0.1);
            z-index: 100;
            display: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Main Content Areas */
        .main-content {
            width: 100%;
            position: relative;
        }
        
        /* Category Stage Display */
        .category-stage {
            display: none;
            width: 100%;
        }
        
        .category-display {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.9), rgba(44, 79, 122, 0.8));
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3), 0 4px 15px rgba(233, 30, 99, 0.2);
            border: 3px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
        }
        
        .category-icon-large {
            font-size: 80px;
            color: rgba(233, 30, 99, 0.9);
            margin-bottom: 25px;
            text-shadow: 0 4px 15px rgba(233, 30, 99, 0.4);
        }
        
        .category-title {
            font-size: 48px;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
            letter-spacing: 2px;
        }
        
        .category-points {
            font-size: 36px;
            font-weight: 700;
            color: #e91e63;
            text-shadow: 0 2px 8px rgba(233, 30, 99, 0.4);
        }

        /* Category Specific Colors - Navy Blue Variations */
        .cypriotic {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.95), rgba(30, 58, 95, 0.85));
        }
        
        .cypriotic .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }

        .top5 {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.9), rgba(44, 79, 122, 0.8));
        }
        
        .top5 .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }

        .quess-player {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.85), rgba(44, 79, 122, 0.75));
        }
        
        .quess-player .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }
        
        .recording {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.8), rgba(44, 79, 122, 0.7));
        }
        
        .recording .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }
        
        .gossip {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.75), rgba(44, 79, 122, 0.65));
        }
        
        .gossip .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }
        
        .photo-quiz {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.7), rgba(44, 79, 122, 0.6));
        }
        
        .photo-quiz .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }

        .video {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.65), rgba(44, 79, 122, 0.55));
        }
        
        .video .multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.4), rgba(233, 30, 99, 0.6));
        }

        /* Question View Styles */
        .question-view {
            display: none;
            width: 100%;
        }

        /* Flippable Card */
        .card-container {
            perspective: 1000px;
            margin-top: 20px;
            width: 100%;
            height: 200px;
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            overflow: hidden;
        }

        .card-back {
            transform: rotateY(180deg);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 26px;
            font-weight: bold;
            text-align: center;
            padding: 20px;
        }

        /* Back card colors - Navy Blue Variations */
        .cypriotic-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }

        .top5-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }

        .quess-player-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }
        
        .recording-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }
        
        .gossip-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }
        
        .photo-quiz-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }

        .video-back {
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
        }

        /* Question Styles */
        .question-card {
            border-radius: 20px;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            height: 100%;
            border: 2px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .question-icon {
            width: 80px;
            height: 80px;
            min-width: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
        }

        .question-text {
            color: white;
            font-size: 22px;
            font-weight: 700;
            flex-grow: 1;
            padding: 0 20px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            line-height: 1.4;
        }

        .question-multiplier {
            width: 65px;
            height: 65px;
            min-width: 65px;
            border: 3px solid rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 26px;
            font-weight: 700;
            margin-left: 20px;
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), inset 0 1px 3px rgba(255, 255, 255, 0.2);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .tap-to-reveal {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-style: italic;
            font-weight: 500;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        }

        /* Question card colors - Navy Blue Variations */
        .cypriotic-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.95), rgba(30, 58, 95, 0.85));
        }

        .cypriotic-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }

        .top5-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.9), rgba(44, 79, 122, 0.8));
        }

        .top5-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }

        .quess-player-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.85), rgba(44, 79, 122, 0.75));
        }

        .quess-player-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }
        
        .recording-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.8), rgba(44, 79, 122, 0.7));
        }

        .recording-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }
        
        .gossip-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.75), rgba(44, 79, 122, 0.65));
        }

        .gossip-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }
        
        .photo-quiz-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.7), rgba(44, 79, 122, 0.6));
        }

        .photo-quiz-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }

        .video-question {
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.65), rgba(44, 79, 122, 0.55));
        }

        .video-multiplier {
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.3), rgba(233, 30, 99, 0.5));
        }
        
        /* TOP 5 Notepad */
        .notepad-container {
            margin-top: 15px;
            width: 100%;
            background: linear-gradient(145deg, rgba(30, 58, 95, 0.9), rgba(44, 79, 122, 0.8));
            border-radius: 20px;
            padding: 25px;
            padding-top: 35px;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .notepad-binding {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 25px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .binding-hole {
            width: 35px;
            height: 18px;
            background: linear-gradient(145deg, #1e3a5f, #2c4f7a);
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px;
            border: 1px solid rgba(233, 30, 99, 0.3);
        }
        
        .notepad-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .notepad-item {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .notepad-number {
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, rgba(233, 30, 99, 0.8), rgba(233, 30, 99, 0.9));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 22px;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .notepad-answer {
            flex-grow: 1;
            height: 45px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.95));
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 0 18px;
            color: #1e3a5f;
            font-weight: 700;
            font-size: 18px;
            transition: all 0.3s ease;
            overflow: hidden;
            border: 1px solid rgba(233, 30, 99, 0.2);
        }
        
        .notepad-answer span {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .notepad-item.revealed .notepad-answer span {
            opacity: 1;
        }

        /* Image container for photo questions */
        .image-container {
            margin-top: 20px;
            width: 100%;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-height: 400px;
        }
        
        .question-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            display: block;
        }
        
        /* Audio player */
        .audio-player-container {
            margin-top: 25px;
            width: 100%;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.9));
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            text-align: center;
            border: 2px solid rgba(30, 58, 95, 0.1);
        }
        
        .audio-content {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .play-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(145deg, #e91e63, #c2185b);
            border: 3px solid rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            color: white;
            font-size: 26px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 3px 12px rgba(233, 30, 99, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .play-button:hover {
            transform: scale(1.1) translateY(-3px);
            background: linear-gradient(145deg, #c2185b, #ad1457);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(233, 30, 99, 0.4);
        }
        
        .audio-title {
            margin-left: 15px;
        }
        
        .audio-title h1 {
            font-size: 20px;
            font-weight: 700;
            color: #1e3a5f;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        audio {
            display: none;
        }

        /* Video player */
        .video-player-container {
            margin-top: 25px;
            width: 100%;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.9));
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(233, 30, 99, 0.1);
            text-align: center;
            border: 2px solid rgba(30, 58, 95, 0.1);
        }

        .video-content {
            margin-bottom: 20px;
        }

        .video-player {
            width: 100%;
            max-height: 400px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .video-title h1 {
            font-size: 20px;
            font-weight: 700;
            color: #1e3a5f;
            margin-top: 18px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Responsive Adjustments */
        @media (max-width: 1100px) {
            .navigation-controls {
                gap: 15px;
            }
            
            .nav-button {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 900px) {
            .help-section {
                position: static;
                margin: 10px auto 30px;
                width: 80%;
                max-width: 300px;
            }
        }
        
        @media (max-width: 700px) {
            .question-card {
                flex-direction: column;
                padding: 15px;
            }
            
            .question-icon {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .question-text {
                text-align: center;
                padding: 10px 0;
            }
            
            .question-multiplier {
                margin-left: 0;
                margin-top: 10px;
            }

            .card-container {
                height: 300px;
            }
        }
        
        @media (max-width: 600px) {
            .title {
                font-size: 18px;
            }
            
            .category {
                padding: 12px 15px;
            }
            
            .category-name {
                font-size: 20px;
            }
            
            .multiplier {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }
            
            .category-icon {
                width: 40px;
                height: 40px;
            }

            .question-text {
                font-size: 18px;
            }

            .video-player {
                max-height: 250px;
            }
            
            .video-title h1 {
                font-size: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .title {
                font-size: 16px;
                padding: 8px 12px;
            }
            
            .category {
                padding: 10px 15px;
            }
            
            .category-name {
                font-size: 18px;
            }
            
            .multiplier {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .category-icon {
                width: 35px;
                height: 35px;
            }
        }

        /* Additional Responsive Improvements */
        
        /* Large Screens (Projectors) */
        @media (min-width: 1400px) {
            .container { 
                max-width: 1200px; 
            }
            .question-text { 
                font-size: 28px; 
            }
            .category-name { 
                font-size: 26px; 
            }
            .score-box {
                width: 100px;
                height: 100px;
                font-size: 48px;
            }
            .player {
                width: 120px;
                height: 120px;
            }
        }

        /* Ultra Large Screens (1800px and up) - Large Projectors */
        @media (min-width: 1800px) {
            .container {
                max-width: 1400px;
            }
            .question-text {
                font-size: 32px;
            }
            .category {
                padding: 20px 25px;
            }
            .category-name {
                font-size: 30px;
            }
            .card-container {
                height: 250px;
            }
        }

        /* Better Font Scaling - Override existing font sizes */
        .question-text {
            font-size: clamp(16px, 2.5vw, 28px) !important;
        }

        .category-name {
            font-size: clamp(16px, 2.2vw, 26px) !important;
        }

        /* Enhanced Video Responsiveness */
        .video-player {
            max-height: min(400px, 50vh);
            aspect-ratio: 16/9;
        }

        /* Better touch targets for mobile */
        @media (max-width: 768px) {
            .multiplier, .score-btn, .button {
                min-width: 44px;
                min-height: 44px;
            }
            
            .card:active {
                transform: scale(0.98);
            }
        }
    </style>
</head>
<body>
    <!-- Background Music Control -->
    <div class="music-control stopped" id="musicControl">
        <i class="fas fa-music" id="musicIcon"></i>
    </div>

    <div class="container">
        <!-- Header Section - Game Info -->
        <header class="header">
            <div class="game-info">
                <!-- Logo -->
                <div class="logo-center">
                    <img src="images/logo.png" alt="Only Football Fans" class="logo-image">
                </div>
                
                <!-- Progress Info -->
                <div class="progress-info">
                    <div class="question-counter" id="questionCounter">Question 1 of 21</div>
                    <div class="stage-indicator" id="stageIndicator">Category Stage</div>
                </div>
            </div>
        </header>

        <!-- Navigation Controls -->
        <div class="navigation-controls">
            <button class="nav-button" id="prevButton" disabled>
                <i class="fas fa-arrow-left"></i>
                Previous
            </button>
            
            <button class="nav-button reveal-button" id="revealButton" style="display: none;">
                Reveal Answer
            </button>
            
            <button class="nav-button" id="nextButton">
                Next
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Category Stage -->
            <div class="category-stage" id="categoryStage">
                <div class="category-display">
                    <div class="category-icon-large" id="categoryIcon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="category-title" id="categoryTitle">ΚΥΠΡΙΑΚΟ</div>
                    <div class="category-points" id="categoryPoints">x1 Points</div>
                </div>
            </div>

            <!-- Question View -->
            <div class="question-view" id="questionView">
                <!-- Flippable Card -->
                <div class="card-container">
                    <div class="card" id="questionCard">
                        <!-- Question Card Template -->
                        <div class="card-front" id="questionCardFront">
                            <div class="question-card" id="questionCardContent">
                                <div class="question-icon" id="questionIcon">
                                    <i class="fas fa-trophy" style="color: white; font-size: 36px;"></i>
                                </div>
                                <div class="question-text" id="questionText">
                                    <!-- Question text will be populated by JavaScript -->
                                </div>
                                <div class="question-multiplier" id="questionMultiplier">
                                    x1
                                </div>
                            </div>
                        </div>
    
                        <!-- Answer Card -->
                        <div class="card-back" id="answerCard">
                            <!-- Answer will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            
            <!-- TOP 5 Notepad (only shown for TOP 5 category) -->
            <div class="notepad-container" id="notepadContainer" style="display: none;">
                <div class="notepad-binding">
                    <div class="binding-hole"></div>
                    <div class="binding-hole"></div>
                    <div class="binding-hole"></div>
                    <div class="binding-hole"></div>
                    <div class="binding-hole"></div>
                </div>
                <div class="notepad-list">
                    <div class="notepad-item" data-index="0">
                        <div class="notepad-number">1</div>
                        <div class="notepad-answer"><span></span></div>
                    </div>
                    <div class="notepad-item" data-index="1">
                        <div class="notepad-number">2</div>
                        <div class="notepad-answer"><span></span></div>
                    </div>
                    <div class="notepad-item" data-index="2">
                        <div class="notepad-number">3</div>
                        <div class="notepad-answer"><span></span></div>
                    </div>
                    <div class="notepad-item" data-index="3">
                        <div class="notepad-number">4</div>
                        <div class="notepad-answer"><span></span></div>
                    </div>
                    <div class="notepad-item" data-index="4">
                        <div class="notepad-number">5</div>
                        <div class="notepad-answer"><span></span></div>
                    </div>
                </div>
            </div>

            <!-- Image container for photo questions -->
            <div class="image-container" id="imageContainer" style="display: none;">
                <img id="questionImage" class="question-image" src="" alt="Question Image">
            </div>
            
            <!-- Audio Player for Recording category -->
            <div class="audio-player-container" id="audioPlayerContainer" style="display: none;">
                <div class="audio-content">
                    <button class="play-button" id="audioPlayerButton">
                        <i class="fas fa-play" id="playIcon"></i>
                        <i class="fas fa-pause" id="pauseIcon" style="display: none;"></i>
                    </button>
                    <div class="audio-title">
                        <h1>Άκουσε την ηχογράφηση και απάντησε την ερώτηση</h1>
                    </div>
                </div>
                
                <audio id="audioElement" preload="metadata"></audio>
            </div>

            <!-- Video Player for Video category -->
            <div class="video-player-container" id="videoPlayerContainer" style="display: none;">
                <div class="video-content">
                    <video id="videoElement" class="video-player" controls preload="metadata">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="video-title">
                    <h1>Παρακολούθησε το βίντεο και απάντησε την ερώτηση</h1>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state management
        let currentQuestionIndex = 0;
        let currentStage = 'category'; // 'category', 'question', 'answer'
        let top5RevealedItems = 0;
        
        // Question sequence - predefined order
        const questionSequence = [
            // Cypriotic questions
            { category: 'cypriotic', multiplier: 'x1', icon: 'fas fa-trophy' },
            { category: 'cypriotic', multiplier: 'x2', icon: 'fas fa-trophy' },
            { category: 'cypriotic', multiplier: 'x3', icon: 'fas fa-trophy' },
            
            // Top 5 questions
            { category: 'top5', multiplier: 'x2', index: 0, icon: 'fas fa-list-ol' },
            { category: 'top5', multiplier: 'x2', index: 1, icon: 'fas fa-list-ol' },
            { category: 'top5', multiplier: 'x3', icon: 'fas fa-list-ol' },
            
            // Quess Player questions
            { category: 'quess-player', multiplier: 'x1', icon: 'fas fa-user' },
            { category: 'quess-player', multiplier: 'x2', icon: 'fas fa-user' },
            { category: 'quess-player', multiplier: 'x3', icon: 'fas fa-user' },
            
            // Recording questions
            { category: 'recording', multiplier: 'x1', icon: 'fas fa-microphone' },
            { category: 'recording', multiplier: 'x2', icon: 'fas fa-microphone' },
            { category: 'recording', multiplier: 'x3', icon: 'fas fa-microphone' },
            
            // Gossip questions
            { category: 'gossip', multiplier: 'x2', index: 0, icon: 'fas fa-comment-dots' },
            { category: 'gossip', multiplier: 'x2', index: 1, icon: 'fas fa-comment-dots' },
            
            // Photo Quiz questions
            { category: 'photo-quiz', multiplier: 'x1', index: 0, icon: 'fas fa-camera' },
            { category: 'photo-quiz', multiplier: 'x1', index: 1, icon: 'fas fa-camera' },
            { category: 'photo-quiz', multiplier: 'x2', icon: 'fas fa-camera' },
            
            // Video questions
            { category: 'video', multiplier: 'x1', icon: 'fas fa-video' },
            { category: 'video', multiplier: 'x2', icon: 'fas fa-video' },
            { category: 'video', multiplier: 'x3', icon: 'fas fa-video' }
        ];
        
        // Quiz data structure
        const quizData = {
            "cypriotic": {
                "x1": {
                    question: "Ποιος ήταν ο τερματοφύλακας του ΑΠΟΕΛ στον ιστορικό αγώνα Athletic Bilbao – ΑΠΟΕΛ που έληξε 3-2 υπέρ της ισπανικής ομάδας;",
                    answer: "Waterman"
                },
                "x2": {
                    question: "Ποια είναι η ομάδα με τις περισσότερες ήττες συνολικα τα τελευταία 5 χρόνια στο Κυπριακό πρωτάθλημα;",
                    answer: "Καρμιώτισσα (79)"
                },
                "x3": {
                    question: "Ποια κυπριακή ομάδα κατέχει το απόλυτο ρεκόρ αήττητου σερί στο πρωτάθλημα Α΄ Κατηγορίας και με πόσα συνεχόμενα παιχνίδια έμεινε αήττητη;",
                    answer: "Ομόνοια – 46 αγώνες"
                }
            },
            "top5": {
                "x2": [
                    {
                        question: "Πολυτιμότεροι παίκτες (Transfermarkt) ηλικίας ≥ 34 ετών",
                        answers: [
                            "1. Kevin De Bruyne (€20 m)",
                            "2. Antoine Griezmann (€18 m)",
                            "3. Lionel Messi (€18 m)",
                            "4. Robert Lewandowski (€12 m)",
                            "4. Cristiano Ronaldo (€12 m)"
                        ]
                    },
                    {
                        question: "Τερματοφύλακες με τα περισσότερα clean sheets φέτος (Top-5 leagues)",
                        answers: [
                            "1. Alex Meret – Napoli (17)",
                            "2. Mile Svilar – Roma (16)",
                            "3. Jan Oblak – Atlético Madrid (15)",
                            "4. Michele Di Gregorio – Juventus (14)",
                            "5. Péter Gulácsi – RB Leipzig (14)"
                        ]
                    }
                ],
                "x3": {
                    question: "Πιο ακριβές αγορές της West Ham",
                    answers: [
                        "1. Sébastien Haller (Frankfurt – €50 m)",
                        "2. Maximilian Kilman (Wolves – €47.5 m)",
                        "3. Mohammed Kudus (Ajax – €43 m)",
                        "4. Lucas Paquetá (Lyon – €42.95 m)",
                        "5. Jean-Clair Todibo (Nice – €42 m)"
                    ]
                }
            },
            "quess-player": {
                "x1": {
                    question: "Ποιος είναι ο ποδοσφαιριστής με τα ακόλουθα στατιστικά;",
                    answer: "Marc Cucurella",
                    imageUrl: "images/QuessThePlayer1.png"
                },
                "x2": {
                    question: "Ποιος λείπει από την ενδεκάδα του τελικού Euro 2016 μεταξύ Πορτογαλίας και Γαλλίας;",
                    answer: "José Fonte",
                    imageUrl: "images/QuessThePlayer2.png"
                },
                "x3": {
                    question: "Ποιος είναι ο ποδοσφαιριστής με τα ακόλουθα στατιστικά;",
                    answer: "Martin Demichelis",
                    imageUrl: "images/QuessThePlayer3.png"
                }
            },
            "recording": {
                "x1": {
                    question: "Ποιας ομάδας προπονητής είναι ο τεχνικός που ακούγεται στη συνέντευξη;",
                    answer: "ΟΦΗ",
                    audioUrl: "Audio/Recording1.mp3"
                },
                "x2": {
                    question: "Πότε δόθηκε η post-match συνέντευξη που θα ακούσεις και ποιες ομάδες αγωνίζονταν;",
                    answer: "2018 – Manchester United vs Tottenham",
                    audioUrl: "Audio/Recording2.mp3"
                },
                "x3": {
                    question: "Σε ποιο πρωτάθλημα αγωνιζόταν ο ποδοσφαιριστής που δίνει τη συνέντευξη;",
                    answer: "South African Premier Division",
                    audioUrl: "Audio/Recording3.mp3"
                }
            },
            "gossip": {
                "x1": {
                    question: "Ποιος ποδοσφαιριστής άναψε πυροτεχνήματα στο μπάνιο του, προκαλώντας φωτιά στο σπίτι του;",
                    answer: "Mario Balotelli"
                },
                "x2": [
                    {
                        question: "Ποιος ποδοσφαιριστής προκάλεσε χαμό στο Instagram ανεβάζοντας βίντεο να τρώει «χρυσή μπριζόλα» 24 καρατίων, με αποτέλεσμα να δεχθεί πρόστιμο από την ομάδα του;",
                        answer: "Franck Ribéry"
                    },
                    {
                        question: "Ποιος Άγγλος ποδοσφαιριστής έγινε πρωτοσέλιδο το 2011 όταν, παίζοντας με αεροβόλο στο προπονητικό, τραυμάτισε κατά λάθος νεαρό φοιτητή σε πρακτική;",
                        answer: "Ashley Cole"
                    }
                ]
            },
            "photo-quiz": {
                "x1": [
                    {
                        question: "Ποιος πανηγυρίζει στη φωτογραφία;",
                        answer: "Andrés Iniesta",
                        imageUrl: "images/PhotoQuiz1.png"
                    },
                    {
                        question: "Ποιον αγώνα παρακολουθεί ο πιο κάτω κύριος;",
                        answer: "Switzerland vs France",
                        imageUrl: "images/PhotoQuiz2.png"
                    }
                ],
                "x2": {
                    question: "Ποια ποδοσφαιρική ομάδα - και σε ποιο γήπεδο - είδε τους οπαδούς της, σε παιχνίδι του Φεβρουαρίου 2023, να σταματούν τον αγώνα ακριβώς στις 04:17 και να πετούν χιλιάδες λούτρινα αρκουδάκια στον αγωνιστικό χώρο;",
                    answer: "Besiktas - Vodafone Park",
                    imageUrl: "images/PhotoQuiz3.png"
                }
            },
            "video": {
                "x1": {
                    question: "Ποιός σκόραρε το νικητήριο γκολ του πιο κάτω αγώνα;",
                    answer: "Alisson Becker",
                    videoUrl: "Videos/Video1.mp4"
                },
                "x2": {
                    question: "Ποια χρονιά σημειώθηκε το γκολ που βλέπεις;",
                    answer: "1997",
                    videoUrl: "Videos/Video2.mp4"
                },
                "x3": {
                    question: "Υπάρχει μονο 1 ομαδα εκτός Ισπανίας και Ιταλίας, στην οποία έχουν αγωνιστεί δύο από τους παίκτες που αγγίζουν την μπάλα στο βίντεο. Μπορείτε να ονομάσετε αυτή την ομάδα και τους δύο παίκτες;",
                    answer: "Ronaldo, Roberto Carlos - Corinthians",
                    videoUrl: "Videos/Video3.mp4"
                }
            }
        };

        // DOM Elements
        const categoryStage = document.getElementById('categoryStage');
        const questionView = document.getElementById('questionView');
        const questionCounter = document.getElementById('questionCounter');
        const stageIndicator = document.getElementById('stageIndicator');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const revealButton = document.getElementById('revealButton');
        const categoryIcon = document.getElementById('categoryIcon');
        const categoryTitle = document.getElementById('categoryTitle');
        const categoryPoints = document.getElementById('categoryPoints');
        const questionCard = document.getElementById('questionCard');
        const questionIcon = document.getElementById('questionIcon');
        const questionText = document.getElementById('questionText');
        const questionMultiplier = document.getElementById('questionMultiplier');
        const questionCardContent = document.getElementById('questionCardContent');
        const answerCard = document.getElementById('answerCard');
        const notepadContainer = document.getElementById('notepadContainer');
        const notepadItems = document.querySelectorAll('.notepad-item');
        const imageContainer = document.getElementById('imageContainer');
        const questionImage = document.getElementById('questionImage');
        const audioPlayerContainer = document.getElementById('audioPlayerContainer');
        const audioElement = document.getElementById('audioElement');
        const audioPlayerButton = document.getElementById('audioPlayerButton');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const videoPlayerContainer = document.getElementById('videoPlayerContainer');
        const videoElement = document.getElementById('videoElement');
        
        // Audio Elements (single element for both background music and questions)
        const musicControl = document.getElementById('musicControl');
        const musicIcon = document.getElementById('musicIcon');
        let musicState = 'stopped'; // 'stopped', 'playing', 'paused'
        let audioMode = 'none'; // 'background', 'question', 'none'
        let backgroundMusicSrc = 'Audio/Background.mp3';

        // Category display names
        const categoryNames = {
            'cypriotic': 'ΚΥΠΡΙΑΚΟ',
            'top5': 'TOP 5',
            'quess-player': 'GUESS THE PLAYER',
            'recording': 'RECORDING',
            'gossip': 'GOSSIP',
            'photo-quiz': 'PHOTO QUIZ',
            'video': 'VIDEO'
        };

        // Initialize the game
        function initGame() {
            updateDisplay();
        }

        // Update the display based on current state
        function updateDisplay() {
            const currentQuestion = questionSequence[currentQuestionIndex];
            
            // Update progress indicator
            questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${questionSequence.length}`;
            
            // Update stage indicator
            if (currentStage === 'category') {
                stageIndicator.textContent = 'Category Stage';
            } else if (currentStage === 'question') {
                stageIndicator.textContent = 'Question Stage';
            } else if (currentStage === 'answer') {
                stageIndicator.textContent = 'Answer Stage';
            }
            
            // Show/hide stages
            categoryStage.style.display = currentStage === 'category' ? 'block' : 'none';
            questionView.style.display = (currentStage === 'question' || currentStage === 'answer') ? 'block' : 'none';
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update content based on stage
            if (currentStage === 'category') {
                showCategoryStage(currentQuestion);
            } else if (currentStage === 'question') {
                showQuestionStage(currentQuestion);
            } else if (currentStage === 'answer') {
                showAnswerStage(currentQuestion);
            }
        }

        // Navigation functions
        function updateNavigationButtons() {
            // Previous button
            const canGoPrev = currentQuestionIndex > 0 || currentStage !== 'category';
            prevButton.disabled = !canGoPrev;
            
            // Next button
            const isLastQuestion = currentQuestionIndex >= questionSequence.length - 1;
            const isLastStage = currentStage === 'answer';
            nextButton.disabled = isLastQuestion && isLastStage;
            
            // Reveal button (only show in question stage)
            revealButton.style.display = currentStage === 'question' ? 'block' : 'none';
        }
        
        function showCategoryStage(questionData) {
            const categoryName = categoryNames[questionData.category];
            const iconClass = questionData.icon;
            
            categoryIcon.innerHTML = `<i class="${iconClass}"></i>`;
            categoryTitle.textContent = categoryName;
            categoryPoints.textContent = `${questionData.multiplier} Points`;
        }
        
        function showQuestionStage(questionData) {
            resetQuestionState();
            
            const questionObj = getQuestionData(questionData);
            const categoryName = questionData.category;
            const iconClass = questionData.icon;
            
            // Ensure question is visible and answer is hidden
            const questionCardFront = document.getElementById('questionCardFront');
            questionCardFront.style.display = 'block';
            answerCard.style.display = 'none';
            
            // Update question card
            questionIcon.innerHTML = `<i class="${iconClass}" style="color: white; font-size: 36px;"></i>`;
            questionText.textContent = questionObj.question;
            questionMultiplier.textContent = questionData.multiplier;
            
            // Apply category-specific styling
            questionCardContent.className = `question-card ${categoryName}-question`;
            
            // Handle special question types
            if (categoryName === 'top5') {
                showTop5Question(questionObj);
            } else if (categoryName === 'quess-player' || categoryName === 'photo-quiz') {
                showImageQuestion(questionObj);
            } else if (categoryName === 'recording') {
                showAudioQuestion(questionObj);
            } else if (categoryName === 'video') {
                showVideoQuestion(questionObj);
            }
        }
        
        function showAnswerStage(questionData) {
            const questionObj = getQuestionData(questionData);
            const categoryName = questionData.category;
            
            if (categoryName === 'top5') {
                // For TOP 5, answers are already revealed in the notepad above
                return;
            } else {
                // Hide question card and show answer card (simple show/hide, no flip animation)
                const questionCardFront = document.getElementById('questionCardFront');
                
                // Hide the question
                questionCardFront.style.display = 'none';
                
                // Set up and show the answer
                answerCard.textContent = questionObj.answer;
                answerCard.className = `card-back ${categoryName}-back`;
                answerCard.style.display = 'flex';
                answerCard.style.transform = 'none'; // Remove any 3D transform
            }
        }

        // Helper function to get question data
        function getQuestionData(questionData) {
            const { category, multiplier, index } = questionData;
            const categoryData = quizData[category][multiplier];
            
            if (Array.isArray(categoryData)) {
                return categoryData[index || 0];
            }
            return categoryData;
        }
        
        // Reset the state of question cards and notepad
        function resetQuestionState() {
            // Reset card display states (show question, hide answer)
            const questionCardFront = document.getElementById('questionCardFront');
            questionCardFront.style.display = 'block';
            answerCard.style.display = 'none';
            
            // Reset TOP 5 revealed items counter
            top5RevealedItems = 0;
            
            // Reset notepad items to not revealed
            notepadItems.forEach(item => {
                item.classList.remove('revealed');
                const span = item.querySelector('.notepad-answer span');
                if (span) span.textContent = '';
            });
            
            // Hide all question content containers
            notepadContainer.style.display = 'none';
            imageContainer.style.display = 'none';
            audioPlayerContainer.style.display = 'none';
            videoPlayerContainer.style.display = 'none';
            
            // Reset audio only if not in background music mode
            if (audioElement && audioMode !== 'background') {
                audioElement.pause();
                audioElement.currentTime = 0;
                if (playIcon && pauseIcon) {
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                }
            }
            
            // Reset video
            if (videoElement) {
                videoElement.pause();
                videoElement.currentTime = 0;
            }
        }
        
        // Show TOP 5 question with notepad
        function showTop5Question(questionObj) {
            notepadContainer.style.display = 'block';
            
            // Set the answers in the notepad items
            notepadItems.forEach((item, index) => {
                const span = item.querySelector('.notepad-answer span');
                if (span && questionObj.answers && questionObj.answers[index]) {
                    span.textContent = questionObj.answers[index];
                }
            });
        }
        
        // Show question with image
        function showImageQuestion(questionObj) {
            if (questionObj.imageUrl) {
                imageContainer.style.display = 'block';
                questionImage.src = questionObj.imageUrl;
            }
        }
        
        // Show audio question
        function showAudioQuestion(questionObj) {
            if (questionObj.audioUrl) {
                audioPlayerContainer.style.display = 'block';
                setupAudioPlayer(questionObj);
            }
        }
        
        // Show video question
        function showVideoQuestion(questionObj) {
            if (questionObj.videoUrl) {
                videoPlayerContainer.style.display = 'block';
                setupVideoPlayer(questionObj);
            }
        }
        
        // Set up the audio player
        function setupAudioPlayer(data) {
            // Switch to question audio mode
            switchToQuestionAudio(data.audioUrl);
            
            // Reset player icons
            if (playIcon && pauseIcon) {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }

        // Set up the video player
        function setupVideoPlayer(data) {
            videoElement.src = data.videoUrl;
            videoElement.pause();
            videoElement.currentTime = 0;
        }
        
        // Toggle audio playback
        function toggleAudio() {
            if (audioElement.paused) {
                audioElement.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                audioElement.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }
        
        // Navigation event handlers
        function navigateNext() {
            if (currentStage === 'category') {
                currentStage = 'question';
            } else if (currentStage === 'question') {
                currentStage = 'answer';
            } else if (currentStage === 'answer') {
                // Move to next question
                if (currentQuestionIndex < questionSequence.length - 1) {
                    currentQuestionIndex++;
                    currentStage = 'category';
                }
            }
            updateDisplay();
        }
        
        function navigatePrevious() {
            if (currentStage === 'answer') {
                currentStage = 'question';
            } else if (currentStage === 'question') {
                currentStage = 'category';
            } else if (currentStage === 'category' && currentQuestionIndex > 0) {
                currentQuestionIndex--;
                currentStage = 'answer';
            }
            updateDisplay();
        }
        
        function revealAnswer() {
            const currentQuestion = questionSequence[currentQuestionIndex];
            
            if (currentQuestion.category === 'top5') {
                // Progressive reveal for TOP 5
                revealNextTop5Item();
            } else {
                // Normal answer reveal
                currentStage = 'answer';
                updateDisplay();
            }
        }
        
        function revealNextTop5Item() {
            if (top5RevealedItems < 5) {
                const item = notepadItems[top5RevealedItems];
                if (item) {
                    item.classList.add('revealed');
                    top5RevealedItems++;
                    
                    // If all items revealed, move to answer stage
                    if (top5RevealedItems >= 5) {
                        setTimeout(() => {
                            currentStage = 'answer';
                            updateDisplay();
                        }, 500);
                    }
                }
            }
        }
        
        // Background Music Control Functions (using single audio element)
        function toggleBackgroundMusic() {
            if (musicState === 'stopped' || musicState === 'paused') {
                // Switch to background music mode
                switchToBackgroundMusic();
                if (musicState === 'stopped') {
                    audioElement.currentTime = 0; // Always restart if stopped
                }
                audioElement.play().catch(function(error) {
                    console.log('Background music play failed:', error);
                });
                musicState = 'playing';
                audioMode = 'background';
            } else {
                audioElement.pause();
                musicState = 'paused';
            }
            updateMusicButton(musicState);
        }
        
        function switchToBackgroundMusic() {
            // Stop any question audio and switch to background music
            audioElement.pause();
            audioElement.src = backgroundMusicSrc;
            audioElement.loop = true;
            audioMode = 'background';
            
            // Hide audio player UI if visible
            if (audioPlayerContainer) {
                audioPlayerContainer.style.display = 'none';
            }
        }
        
        function switchToQuestionAudio(questionAudioSrc) {
            // Stop background music and switch to question audio
            if (audioMode === 'background') {
                musicState = 'stopped';
                updateMusicButton('stopped');
            }
            
            audioElement.pause();
            audioElement.src = questionAudioSrc;
            audioElement.loop = false;
            audioElement.currentTime = 0;
            audioMode = 'question';
        }
        
        function updateMusicButton(state) {
            // Remove all state classes
            musicControl.classList.remove('playing', 'paused', 'stopped');
            
            // Add current state class
            musicControl.classList.add(state);
            
            // Update icon based on state
            switch(state) {
                case 'playing':
                    musicIcon.className = 'fas fa-pause';
                    break;
                case 'paused':
                    musicIcon.className = 'fas fa-play';
                    break;
                case 'stopped':
                    musicIcon.className = 'fas fa-music';
                    break;
            }
        }
        
        function setupBackgroundMusic() {
            // Handle when track naturally ends
            audioElement.addEventListener('ended', function() {
                if (audioMode === 'background') {
                    // Auto-restart background music - continuous loop
                    this.currentTime = 0;
                    this.play();
                    musicState = 'playing';
                    updateMusicButton('playing');
                }
                // For question audio, just stop and reset icons
                else if (audioMode === 'question') {
                    if (playIcon && pauseIcon) {
                        playIcon.style.display = 'block';
                        pauseIcon.style.display = 'none';
                    }
                }
            });
            
            // Handle audio loading errors
            audioElement.addEventListener('error', function() {
                console.error('Audio failed to load');
                if (audioMode === 'background') {
                    musicState = 'stopped';
                    updateMusicButton('stopped');
                }
            });
            
            // Initialize button state
            updateMusicButton('stopped');
        }
        
        // Event Listeners
        nextButton.addEventListener('click', navigateNext);
        prevButton.addEventListener('click', navigatePrevious);
        revealButton.addEventListener('click', revealAnswer);
        
        // Background music button event
        musicControl.addEventListener('click', toggleBackgroundMusic);
        
        // Audio player button event
        if (audioPlayerButton) {
            audioPlayerButton.addEventListener('click', toggleAudio);
        }
        
        // Notepad item click functionality for TOP 5
        notepadItems.forEach(item => {
            item.addEventListener('click', function() {
                if (currentStage === 'answer' && questionSequence[currentQuestionIndex].category === 'top5') {
                    this.classList.add('revealed');
                }
            });
        });
        
        // Initialize audio system (for both background music and questions)
        setupBackgroundMusic();
        
        // Start the game
        initGame();
    </script>
</body>
</html>